<!DOCTYPE html>

<html>

<head>
    <title>Maksekeskus - Card payment</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="https://static.maksekeskus.ee/img/favicon.ico" />
    <link rel="apple-touch-icon" href="https://static.maksekeskus.ee/img/apple-touch-icon.png">
<script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
</head>

<body>
    <script src="https://payment.test.maksekeskus.ee/checkout/dist/checkout.min.js?154-codepipeline/test_ir-gw"
        type="text/javascript"></script>

    <!-- Checkout form -->
    <script type="text/javascript">
        function checkout_completed(data) {
            var form = document.createElement('form');
            form.setAttribute('method', 'POST');
            form.setAttribute('action', '/pay/return.html');
            form.setAttribute('id', 'MaksekeskusPostForm');

            document.querySelector('body').appendChild(form);

            var postForm = document.querySelector('#MaksekeskusPostForm');

            // insert trx id into the form
            var input = document.createElement('input');
            input.setAttribute('type', 'hidden');
            input.setAttribute('name', 'trx');
            input.value = '731c32bb-08e3-406f-a0f9-671fb1f95f2d';
            postForm.appendChild(input);

            // insert token data into the form
            for (var field in data) {
                if (data.hasOwnProperty(field)) {
                    var input = document.createElement('input');
                    input.setAttribute('type', 'hidden');
                    input.setAttribute('name', field);
                    input.value = data[field];
                    postForm.appendChild(input);
                }
            }

            // create submit button (because calling direct .submit() on the form, doesn't trigger the event)
            var submitButton = document.createElement('input');
            submitButton.setAttribute('type', 'submit');
            submitButton.setAttribute('id', 'maksekeskusBuy');
            submitButton.setAttribute('style', 'display: none');

            // submit form
            postForm.appendChild(submitButton);
            postForm.querySelector('#maksekeskusBuy').click();
        }

        function checkout_cancelled(data) {
            window.top.location.href = "/pay/cancel.html?trx=731c32bb-08e3-406f-a0f9-671fb1f95f2d";
        }

        $(function () {

            Maksekeskus.Checkout.initialize({
   
              completed: "checkout_completed",
                cancelled: "checkout_cancelled",
                noConflict: false,
                persistentModal: true,
                openOnLoad: true,
                key: "PHu5u5j7fwLa19PngtEmGfnPutmqN7Oh",
                name: "mk-test",
                transaction: "731c32bb-08e3-406f-a0f9-671fb1f95f2d",
                amount: "75.95",
                currency: "EUR",
                description: "2113111564728",
                locale: "et",
                email: "",
				clientName: "",
				backdropClose: false,
				cancelButton: true
            });

        });
    </script>

</body>

</html>