
<!DOCTYPE html>
<html lang="en">
<style>
iframe {
width: 100px;
}
</style>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Maksekeskus developer portal | Credit Card Dialog (checkout.js)</title>

                    <base href="https://developer.maksekeskus.ee/">
        
        <!-- Bootstrap Latest compiled and minified CSS -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

        <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
        
        <!-- Latest compiled and minified JavaScript -->
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>


        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

        <script>
        function toggleResponseBody(id) {
            $('#responseBodyJson_' + id).collapse('toggle');
            $('#responseBodyPhp_' + id).collapse('toggle');

            var btnJson = $('#btnResponseBodyJson_' + id);
            var btnPhp = $('#btnResponseBodyPhp_' + id);

            if (btnJson.hasClass('active')) {
                btnJson.removeClass('active');
                btnPhp.addClass('active');
            } else {
                btnJson.addClass('active');
                btnPhp.removeClass('active');
            }
        }
        </script>

        <link href="https://developer.maksekeskus.ee/jse/jsoneditor.min.css" rel="stylesheet" type="text/css">
        <script src="https://developer.maksekeskus.ee/jse/jsoneditor.min.js"></script>

    </head>

<body>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-49385742-7', 'auto');
  ga('send', 'pageview');

</script>

<nav class="navbar navbar-default">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
        <a href="https://developer.makecommerce.net"> <img alt="Brand" src="makecommerce_logo_en.svg" height="50"> </a>
        <!-- <span>developer portal </span> -->
        <span>&nbsp; </span>
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </button>

    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->


        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
          <ul class="nav navbar-nav">
            <li class="default">
                <a  href="reference.php">API Docs</a>
            </li>
            <li class="default">
                <a  href="intro.php">API tester</a>
            </li>
            <li class="default">
                <a href="redirect.php">Payment Gateway</a>
            </li>
            <li class="active">
                <a href="checkout.php">Credit Card</a>
            </li>
            <li class="default">
                <a href="checkout2.php">mTasku</a>
            </li>
            <li class="default">
                <a href="paylater.php">Pay later</a>
            </li>
            <li class="default">
                <a href="messages.php">Notifications</a>
            </li>
             <!--
              <li class="default">
                <a style="color:red" href="medoro/payment.php">Medoro API</a>
              </li> -->
                      </ul>

      
      <ul class="nav navbar-nav navbar-right">
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
           <!-- / <span class="glyphicon glyphicon-refresh"></span>  -->
            <b>Shop Context:</b> mk-test <span class="caret"></span></a>
        <ul class="dropdown-menu">
            <li><a href="context.php?action=reset"> Reset context</a></li>
            <li><a href="contextlist.php">View current context</a></li>   
            <li><a href="context.php?action=edit"> Edit current context</a></li>   
        </ul> 
        </li>  
      </ul>
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>

<!--
<div class="alert alert-danger" role="alert"> <b>NB! our bank-link emulator is out of order. </b> We are working to fix it, ETA May-11. You can currently test full payment cycle only with credit cards that have NO 3dSecure enabled.</div>
-->

    <div class="container-fluid">
       
      
               <!-- API-pages that have left navi  -->              



<!--
<div class="alert alert-danger" role="alert">
NB! Currently card payments in the Test environment do not work. <br>
The problem is outside our systems, we are waiting it to be fixed by our partners.
</div>
-->

<div class="panel panel-default">
	<!-- <div class="panel-heading">About...</div>  -->
	<div class="panel-body">
		Our Credit Card Dialog is a secure way to take payments from your clients so that the sensitive card data does not pass through your systems, thus avoiding the <a href="https://en.wikipedia.org/wiki/Payment_Card_Industry_Data_Security_Standard">PCI DSS compliancy requirement </a> on you.
		<br>
		Our checkout.js builds a card data collection dialog as a semi-transparent iFrame layer on top of shop checkout page. The sensitive card data is submitted directly within this iFrame to Maksekeskus backend. If applicable the user is redirected through 3DS dialog. On sucessful authorization, payment is completed and result is passed back to the shop. <br>
		The request contains a payment token that - if you requested as 'multi-use token' - you could store in your system for later reuse. 
		See more about it: <a href="recurring.php"> recurring credit card payments </a><br>
		<br>
		For testing with credit cards you can use the information procided on our <a href="https://makecommerce.net/for-developers/test-environment/" target="blank">test cards</a> page.<br>
		<br>
        <div class="panel-group" id="introAccordion">
        <!-- NO3D payments are no longer possible! -->
	<!--	<div class="panel panel-default">
				<div class="panel-heading" data-toggle="collapse" data-parent="#introAccordion" data-target="#collapseOne">
					<h4 class="panel-title">
						<a class="accordion-toggle">
							Regular flow (no 3DSecure):
						</a>
					</h4>
				</div>
				
				<div id="collapseOne" class="panel-collapse collapse in" aria-expanded="true" style>
					<div class="panel-body">
						<ol>
							<li>Create a <code>transaction</code> in API</li>
							<li>Prepare parameters for the checkout.js script and trigger it:</li>
							<ul>
								<li>Place an hidden form on your checkout page that checkout.js will use to post the data to your backend <br>OR</li>
								<li>Invoke checkout.js with a callback function to process the data returned </li>
							</ul>
							<li>checkout.js now builds an iFrame with dialog where the customer fills in Credit card data and submits the data to MK backend</li>
							<li>MK backend will process the payment through respective card networks</li>
							<li>MK backend returns <code>token_return</code> message and checkout.js in browser passes it back to shop - either the form submit or callback function</li>
							<li>Verify the transaction state within the message returned: if state='COMPLETED' you may consider the payment successful and proceed with your order fulfillment logic</li>
							<li>Display success message to buyer</li>
					   </ol>
					</div>
				</div>
			</div>	 -->

			<div class="panel panel-default">
				<div class="panel-heading">
					<h5 class="panel-title"  data-toggle="collapse" data-parent="#" data-target="#collapseTwo">
						<a class="accordion-toggle">
							3D secure card payment flow:
						</a>
					</h5>
				</div>
			
				<div id="collapseTwo" class="panel-collapse collapse in" aria-expanded="true" style>
					<div class="panel-body">
						Not all the <a href="https://en.wikipedia.org/wiki/3-D_Secure">3D Secure payments</a> can be processed within iFrame. They will involve redirecting user to extenal authorization page, and when done, the user is redirected back to the<code>return_url</code> of the shop. Thus the return_url of your shop must be always ready to process also <a href="messages.php">the <code>token_return</code> message</a>.
						<br><br>
						
						 <ol>
							<li>Create a <code>transaction</code> in API</li>
							<li>Prepare parameters for the checkout.js script and trigger it:</li>
							<ul>
								<li>Place an hidden form on your checkout page that checkout.js will use to post the data to your backend <br>OR</li>
								<li>Invoke checkout.js with a callback function to process the data returned </li>
							</ul>
							<li>checkout.js now builds an iFrame with dialog where the customer fills in Credit card data and submits the data to MK backend</li>
							<li>Customer is redirected to card issuer bank's authentication dialog</li>
							<li>After authentication the customer is redirected back to MK systems, our backend will process the payment through respective card networks</li>
							<li>The customer is redirected back to the shop <code>return_url</code> by making POST request with (<code>token_return</code> message) </li>
							<li>Verify the transaction state within the message returned: if state='COMPLETED' you may consider the payment successful and proceed with your order fulfillment logic</li>
							<li>Display success message to buyer</li>
						</ol>
					</div>
				</div>
			</div>
			
			<div class="panel panel-default">
				<div class="panel-heading">
				  <h5 class="panel-title"  data-toggle="collapse" data-parent="#" data-target="#collapseThree">
					<a class="accordion-toggle">
					  3DSecure single one-off card payment flow:
					</a>
				  </h5>
				</div>
				
				<div id="collapseThree" class="panel-collapse collapse in" aria-expanded="true" style>
					<div class="panel-body">
						<div class="col-md-6">
							<ol>
								<li>Customer reaches to the check-out page on e-shop site.</li>
								<li>E-shop registers a new Transaction in MK-Systems.</li>
								<li>MK System responds to e-shop back-end server, which initiates payment dialog with displaying payment methods to customer.</li>
								<li>Customer selects to pay with credit card.</li>
								<li>E-shop prepares parameters and invokes checkout.js, which builds a card data collection and launches Credit Card Dialog as a semi-transparent iFrame layer on top of shop checkout page. The sensitive card data is submitted directly within this iFrame to Maksekeskus backend. If applicable the user is redirected through 3DS dialog. E-shop must to trigger checkout.js.</li>
								<li>In the dialog the customer fills in credit card data and submits the data to MK backend, to perform the payment in the selected channel.</li>
								<li>iFrame sends to MK System ajax POST message with card data and xid.</li>
								<li>MK System initiates payment in Card Networks with submitted card data. Card network makes lookup, if card is 3D-enabled.</li>
								<li>MK Systems sends redirect to 3D to MK iFrame which turns to e-shop browser.</li>
								<li>E-shop browser makes Payment Authentication POST request to Card Issuer Bank which responds with authentication dialog.</li>
								<li>Customer enters authentication data.</li>
								<li>E-shop responses to MK System, which completes payment in Card Network. Card Network responses with payment status to MK System. MK System sends POST message with token to merchant return url.</li>
								<li>This step depends on e-shop solution, what is done on e-shop side after message is received from MK Systems to e-shop return_url. Eg. e-shop can make request with token to its back-end server, which responses by displaying to customer 'Thank you page'.</li>
								<li>Payout batch is made to Merchant account from MK System according to merchant agreement. For card payments it takes 7 banking-days, that transaction becomes visible under Accounting details.</li>
							</ol>
						</div>
						
						<div class="col-md-6">
							<img src="/img/integration/3dsecure.png" onclick="openModal(this);" style="max-width: 100%;" />
						</div>
					</div>
				</div>
			</div>
        </div>
	</div>
</div>


<h3><strong>Tutorial(click on collapsed titles for more info)</strong></h3>
<div class="panel panel-default">
    <div class="panel-heading" data-toggle="collapse" data-target="#collapseTransaction">
      <h4 class="panel-title">
        <a class="accordion-toggle">
          1. Let's create a transaction (we use settings from the session context)
        </a>   
      </h4> 
    </div>
    <div id="collapseTransaction" class="panel-collapse collapse" aria-expanded="true">
      <div class="panel-body">
        
<h3>Create a transaction</h3>

<pre><small>&lt;?php

$request_body = array(
    'transaction' => array(
        'amount' => $context->transaction->amount,
        'currency' => $context->transaction->currency,
        'reference' => $context->transaction->reference
    ),
    'customer' => array(
        'email' => $context->customer->email,
        'ip' => $context->customer->ip,
        'country' => $context->customer->country,
        'locale' => $context->customer->locale
    )
);

$transaction = $MK->createTransaction($request_body);

?&gt;</small></pre>

<div class="row-fluid"><table class="table">
    <tbody>
        <tr>
            <td class="col-md-2"><b>Request</b></td>
            <td><span class="label label-info">POST</span> https://api.test.maksekeskus.ee/v1/transactions</td>
        </tr>
                    <tr>
                <td>Authentication</td>
                <td><code>6385f130-8e5a-409a-a88b-ac0eefe1467e</code> : <code>qi3bClzMx8wfmAD9Of8tSFPNs8iOJGsA0fSC544pn4aD2WL5ygyJsI3oEQXYIBwk</code></td>
            </tr>
                <tr>
            <td>Content type</td>
            <td><code>application/json</code></td>
        </tr>
        <tr>
            <td>Headers</td>
            <td><pre><small>POST /v1/transactions HTTP/1.1
Host: api.test.maksekeskus.ee
Expect:
User-Agent: Httpful/0.2.20 (cURL/7.85.0 PHP/7.3.33-pl1-zoneos (Linux) Apache / ZoneOS Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36)
Content-Type: application/json
Accept: */*; q=0.5, text/plain; q=0.8, text/html;level=3;
Content-Length: 168
</small></pre></td>
        </tr>
        <tr>
            <td>Body</td>
            <td><pre><small>{
    &quot;transaction&quot;:{
        &quot;amount&quot;:&quot;75.95&quot;,
        &quot;currency&quot;:&quot;EUR&quot;,
        &quot;reference&quot;:&quot;123abc&quot;
    },
    &quot;customer&quot;:{
        &quot;email&quot;:&quot;mk.test@maksekeskus.ee&quot;,
        &quot;ip&quot;:&quot;90.190.81.184&quot;,
        &quot;country&quot;:&quot;ee&quot;,
        &quot;locale&quot;:&quot;et&quot;
    }
}</small></pre></td>
        </tr>
        <tr>
            <td class="col-md-2"><b>Response</b></td>
            <td><span class="label label-success">201</span></td>
        </tr>
                <tr>
            <td>Content type</td>
            <td><code>application/hal+json</code></td>
        </tr>
        <tr>
            <td>Headers</td>
            <td><pre><small>HTTP/1.1 201 
Date: Mon, 20 Feb 2023 14:24:37 GMT
Content-Type: application/hal+json;charset=UTF-8
Transfer-Encoding: chunked
Connection: keep-alive
Set-Cookie: AWSALB=IibbbyHoulD+kiPe+ovhDx026Nav1Zl2Db8PkYEwbkWWMdrNHwuYeymUG/0970HOPjgENvZ9AJFEfjO6HvSxDILzVKgWjUKTEW+QY1NAqcJrai5ZO3P7zlVgzuh/; Expires=Mon, 27 Feb 2023 14:24:37 GMT; Path=/
Set-Cookie: AWSALBCORS=IibbbyHoulD+kiPe+ovhDx026Nav1Zl2Db8PkYEwbkWWMdrNHwuYeymUG/0970HOPjgENvZ9AJFEfjO6HvSxDILzVKgWjUKTEW+QY1NAqcJrai5ZO3P7zlVgzuh/; Expires=Mon, 27 Feb 2023 14:24:37 GMT; Path=/; SameSite=None; Secure
Access-Control-Allow-Origin: *
Access-Control-Allow-Methods: POST, GET, OPTIONS
Access-Control-Allow-Headers: Authorization, Content-Type
Set-Cookie: JSESSIONID=1949098767DEDF6F8078E05EDFACA66F; Path=/; Secure; HttpOnly
X-Request-ID: 7a7a7cda-67c7-4d11-8bc4-41cdc0b54c3a
Location: https://api.test.maksekeskus.ee/v1/transactions/2e737dd6-cf53-42ef-9a53-67e9727bba4b</small></pre></td>
        </tr>
        <tr>
            <td>
                Body
                <div class="btn-group" role="group" aria-label="...">
                    <button id="btnResponseBodyJson_53246bb4a53cf2620f9685adafcfbf32" type="button" class="btn btn-default btn-xs active" onclick="toggleResponseBody('53246bb4a53cf2620f9685adafcfbf32');">JSON</button>
                    <button id="btnResponseBodyPhp_53246bb4a53cf2620f9685adafcfbf32" type="button" class="btn btn-default btn-xs" onclick="toggleResponseBody('53246bb4a53cf2620f9685adafcfbf32');">PHP</button>
                </div>
            </td>
            <td>
                <div id="responseBodyJson_53246bb4a53cf2620f9685adafcfbf32" class="collapse in">
                    <pre><small>{
    &quot;_links&quot;:{
        &quot;Pay&quot;:{
            &quot;href&quot;:&quot;https://api.test.maksekeskus.ee/v1/transactions/2e737dd6-cf53-42ef-9a53-67e9727bba4b/payments&quot;
        },
        &quot;self&quot;:{
            &quot;href&quot;:&quot;https://api.test.maksekeskus.ee/v1/transactions/2e737dd6-cf53-42ef-9a53-67e9727bba4b&quot;
        }
    },
    &quot;amount&quot;:75.95,
    &quot;channel&quot;:null,
    &quot;country&quot;:&quot;ee&quot;,
    &quot;created_at&quot;:&quot;2023-02-20T14:24:37+0000&quot;,
    &quot;currency&quot;:&quot;EUR&quot;,
    &quot;customer&quot;:{
        &quot;country&quot;:&quot;ee&quot;,
        &quot;created_at&quot;:&quot;2023-02-20T14:24:37+0000&quot;,
        &quot;email&quot;:&quot;mk.test@maksekeskus.ee&quot;,
        &quot;id&quot;:&quot;4010e25d-99b4-40a6-8590-d87bf064e761&quot;,
        &quot;ip&quot;:&quot;90.190.81.184&quot;,
        &quot;ip_country&quot;:&quot;ee&quot;,
        &quot;locale&quot;:&quot;et&quot;,
        &quot;name&quot;:&quot;4010e25d-99b4-40a6-8590-d87bf064e761&quot;,
        &quot;object&quot;:&quot;customer&quot;
    },
    &quot;id&quot;:&quot;2e737dd6-cf53-42ef-9a53-67e9727bba4b&quot;,
    &quot;method&quot;:null,
    &quot;object&quot;:&quot;transaction&quot;,
    &quot;payment_methods&quot;:{
        &quot;banklinks&quot;:[
            {
                &quot;channel&quot;:&quot;Swedbank EE&quot;,
                &quot;countries&quot;:[
                    &quot;ee&quot;
                ],
                &quot;country&quot;:&quot;ee&quot;,
                &quot;display_name&quot;:&quot;Swedbank&quot;,
                &quot;logo_url&quot;:&quot;https://static.test.maksekeskus.ee/img/channel/lnd/swedbank.png&quot;,
                &quot;max_amount&quot;:100000.0,
                &quot;name&quot;:&quot;swedbank&quot;,
                &quot;url&quot;:&quot;https://payment.test.maksekeskus.ee/banklink.html?method=EE_SWED&amp;trx=2e737dd6-cf53-42ef-9a53-67e9727bba4b&quot;
            },
            {
                &quot;channel&quot;:&quot;SEB EE&quot;,
                &quot;countries&quot;:[
                    &quot;ee&quot;
                ],
                &quot;country&quot;:&quot;ee&quot;,
                &quot;display_name&quot;:&quot;SEB&quot;,
                &quot;logo_url&quot;:&quot;https://static.test.maksekeskus.ee/img/channel/lnd/seb.png&quot;,
                &quot;max_amount&quot;:100000.0,
                &quot;name&quot;:&quot;seb&quot;,
                &quot;url&quot;:&quot;https://payment.test.maksekeskus.ee/banklink.html?method=EE_SEB&amp;trx=2e737dd6-cf53-42ef-9a53-67e9727bba4b&quot;
            },
            {
                &quot;channel&quot;:&quot;LHV EE&quot;,
                &quot;countries&quot;:[
                    &quot;ee&quot;
                ],
                &quot;country&quot;:&quot;ee&quot;,
                &quot;display_name&quot;:&quot;LHV&quot;,
                &quot;logo_url&quot;:&quot;https://static.test.maksekeskus.ee/img/channel/lnd/lhv.png&quot;,
                &quot;max_amount&quot;:100000.0,
                &quot;name&quot;:&quot;lhv&quot;,
                &quot;url&quot;:&quot;https://payment.test.maksekeskus.ee/banklink.html?method=EE_LHV&amp;trx=2e737dd6-cf53-42ef-9a53-67e9727bba4b&quot;
            },
            {
                &quot;channel&quot;:&quot;Luminor EE&quot;,
                &quot;countries&quot;:[
                    &quot;ee&quot;
                ],
                &quot;country&quot;:&quot;ee&quot;,
                &quot;display_name&quot;:&quot;Luminor&quot;,
                &quot;logo_url&quot;:&quot;https://static.test.maksekeskus.ee/img/channel/lnd/luminor.png&quot;,
                &quot;max_amount&quot;:100000.0,
                &quot;name&quot;:&quot;nordea&quot;,
                &quot;url&quot;:&quot;https://payment.test.maksekeskus.ee/banklink.html?method=EE_NORDEA&amp;trx=2e737dd6-cf53-42ef-9a53-67e9727bba4b&quot;
            },
            {
                &quot;channel&quot;:&quot;Coop Pank EE&quot;,
                &quot;countries&quot;:[
                    &quot;ee&quot;
                ],
                &quot;country&quot;:&quot;ee&quot;,
                &quot;display_name&quot;:&quot;Coop Pank&quot;,
                &quot;logo_url&quot;:&quot;https://static.test.maksekeskus.ee/img/channel/lnd/coop.png&quot;,
                &quot;max_amount&quot;:100000.0,
                &quot;name&quot;:&quot;krediidipank&quot;,
                &quot;url&quot;:&quot;https://payment.test.maksekeskus.ee/banklink.html?method=EE_KREDIIDI&amp;trx=2e737dd6-cf53-42ef-9a53-67e9727bba4b&quot;
            },
            {
                &quot;channel&quot;:&quot;Pocopay EE&quot;,
                &quot;countries&quot;:[
                    &quot;fi&quot;,
                    &quot;ee&quot;
                ],
                &quot;country&quot;:&quot;ee&quot;,
                &quot;display_name&quot;:&quot;Pocopay&quot;,
                &quot;logo_url&quot;:&quot;https://static.test.maksekeskus.ee/img/channel/lnd/pocopay.png&quot;,
                &quot;max_amount&quot;:100000.0,
                &quot;name&quot;:&quot;pocopay&quot;,
                &quot;url&quot;:&quot;https://payment.test.maksekeskus.ee/banklink.html?method=EE_POCOPAY&amp;trx=2e737dd6-cf53-42ef-9a53-67e9727bba4b&quot;
            },
            {
                &quot;channel&quot;:&quot;Revolut PIS&quot;,
                &quot;countries&quot;:[
                    &quot;ee&quot;
                ],
                &quot;country&quot;:&quot;ee&quot;,
                &quot;display_name&quot;:&quot;Revolut&quot;,
                &quot;logo_url&quot;:&quot;https://static.test.maksekeskus.ee/img/channel/lnd/revolut.png&quot;,
                &quot;max_amount&quot;:15000.0,
                &quot;name&quot;:&quot;revolut&quot;,
                &quot;url&quot;:&quot;https://payment.test.maksekeskus.ee/open-banking.html?method=REVOLUT_PIS&amp;trx=2e737dd6-cf53-42ef-9a53-67e9727bba4b&quot;
            }
        ],
        &quot;cards&quot;:[
            {
                &quot;channel&quot;:&quot;Visa&quot;,
                &quot;display_name&quot;:&quot;Visa&quot;,
                &quot;logo_url&quot;:&quot;https://static.test.maksekeskus.ee/img/channel/lnd/visa.png&quot;,
                &quot;name&quot;:&quot;visa&quot;,
                &quot;url&quot;:&quot;https://payment.test.maksekeskus.ee/card.html?trx=2e737dd6-cf53-42ef-9a53-67e9727bba4b&quot;
            },
            {
                &quot;channel&quot;:&quot;MasterCard&quot;,
                &quot;display_name&quot;:&quot;MasterCard&quot;,
                &quot;logo_url&quot;:&quot;https://static.test.maksekeskus.ee/img/channel/lnd/mastercard.png&quot;,
                &quot;name&quot;:&quot;mastercard&quot;,
                &quot;url&quot;:&quot;https://payment.test.maksekeskus.ee/card.html?trx=2e737dd6-cf53-42ef-9a53-67e9727bba4b&quot;
            }
        ],
        &quot;other&quot;:[
            {
                &quot;name&quot;:&quot;redirect&quot;,
                &quot;url&quot;:&quot;https://payment.test.maksekeskus.ee/pay.html?trx=2e737dd6-cf53-42ef-9a53-67e9727bba4b&quot;
            },
            {
                &quot;channel&quot;:&quot;mTasku&quot;,
                &quot;countries&quot;:[
                    &quot;fi&quot;,
                    &quot;ee&quot;
                ],
                &quot;country&quot;:&quot;ee&quot;,
                &quot;display_name&quot;:&quot;mTasku&quot;,
                &quot;logo_url&quot;:&quot;https://static.test.maksekeskus.ee/img/channel/lnd/mtasku.png&quot;,
                &quot;max_amount&quot;:100000.0,
                &quot;name&quot;:&quot;mtasku&quot;,
                &quot;url&quot;:&quot;https://payment.test.maksekeskus.ee/mobile.html?method=MTASKU&amp;trx=2e737dd6-cf53-42ef-9a53-67e9727bba4b&quot;
            },
            {
                &quot;channel&quot;:&quot;Gift card EE&quot;,
                &quot;countries&quot;:[],
                &quot;country&quot;:&quot;ee&quot;,
                &quot;display_name&quot;:&quot;Kniks&quot;,
                &quot;logo_url&quot;:&quot;https://static.test.maksekeskus.ee/img/channel/lnd/gift_card.png&quot;,
                &quot;max_amount&quot;:100000.0,
                &quot;name&quot;:&quot;gift_card&quot;,
                &quot;url&quot;:&quot;https://payment.test.maksekeskus.ee/other.html?method=EE_GIFT_CARD&amp;trx=2e737dd6-cf53-42ef-9a53-67e9727bba4b&quot;
            },
            {
                &quot;channel&quot;:&quot;Gift card EE&quot;,
                &quot;countries&quot;:[],
                &quot;country&quot;:&quot;fi&quot;,
                &quot;display_name&quot;:&quot;Kniks&quot;,
                &quot;logo_url&quot;:&quot;https://static.test.maksekeskus.ee/img/channel/lnd/gift_card.png&quot;,
                &quot;max_amount&quot;:100000.0,
                &quot;name&quot;:&quot;gift_card&quot;,
                &quot;url&quot;:&quot;https://payment.test.maksekeskus.ee/other.html?method=EE_GIFT_CARD&amp;trx=2e737dd6-cf53-42ef-9a53-67e9727bba4b&quot;
            }
        ],
        &quot;payLater&quot;:[
            {
                &quot;channel&quot;:&quot;Indivy 3 EE&quot;,
                &quot;countries&quot;:[
                    &quot;ee&quot;
                ],
                &quot;country&quot;:&quot;ee&quot;,
                &quot;display_name&quot;:&quot;Indivy 3&quot;,
                &quot;logo_url&quot;:&quot;https://static.test.maksekeskus.ee/img/channel/lnd/slice.png&quot;,
                &quot;max_amount&quot;:1500.0,
                &quot;min_amount&quot;:75.0,
                &quot;name&quot;:&quot;slice&quot;,
                &quot;url&quot;:&quot;https://payment.test.maksekeskus.ee/pay-later.html?method=EE_SLICE&amp;trx=2e737dd6-cf53-42ef-9a53-67e9727bba4b&quot;
            },
            {
                &quot;channel&quot;:&quot;Indivy EE&quot;,
                &quot;countries&quot;:[
                    &quot;ee&quot;
                ],
                &quot;country&quot;:&quot;ee&quot;,
                &quot;display_name&quot;:&quot;Indivy&quot;,
                &quot;logo_url&quot;:&quot;https://static.test.maksekeskus.ee/img/channel/lnd/indivy-go.png&quot;,
                &quot;max_amount&quot;:800.0,
                &quot;min_amount&quot;:30.0,
                &quot;name&quot;:&quot;indivy-go&quot;,
                &quot;url&quot;:&quot;https://payment.test.maksekeskus.ee/pay-later.html?method=EE_INDIVY_GO&amp;trx=2e737dd6-cf53-42ef-9a53-67e9727bba4b&quot;
            },
            {
                &quot;channel&quot;:&quot;Liisi ID EE&quot;,
                &quot;countries&quot;:[
                    &quot;ee&quot;
                ],
                &quot;country&quot;:&quot;ee&quot;,
                &quot;display_name&quot;:&quot;Liisi ID&quot;,
                &quot;logo_url&quot;:&quot;https://static.test.maksekeskus.ee/img/channel/lnd/liisi_ee.png&quot;,
                &quot;max_amount&quot;:100000.0,
                &quot;min_amount&quot;:30.0,
                &quot;name&quot;:&quot;liisi_ee&quot;,
                &quot;url&quot;:&quot;https://payment.test.maksekeskus.ee/pay-later.html?method=EE_LIISI_EE&amp;trx=2e737dd6-cf53-42ef-9a53-67e9727bba4b&quot;
            }
        ]
    },
    &quot;recurring_required&quot;:false,
    &quot;reference&quot;:&quot;123abc&quot;,
    &quot;status&quot;:&quot;CREATED&quot;,
    &quot;type&quot;:null
}</small></pre>
                </div>
                <div id="responseBodyPhp_53246bb4a53cf2620f9685adafcfbf32" class="collapse">
                    <pre><small>stdClass Object
(
    [_links] =&gt; stdClass Object
        (
            [Pay] =&gt; stdClass Object
                (
                    [href] =&gt; https://api.test.maksekeskus.ee/v1/transactions/2e737dd6-cf53-42ef-9a53-67e9727bba4b/payments
                )

            [self] =&gt; stdClass Object
                (
                    [href] =&gt; https://api.test.maksekeskus.ee/v1/transactions/2e737dd6-cf53-42ef-9a53-67e9727bba4b
                )

        )

    [amount] =&gt; 75.95
    [channel] =&gt; 
    [country] =&gt; ee
    [created_at] =&gt; 2023-02-20T14:24:37+0000
    [currency] =&gt; EUR
    [customer] =&gt; stdClass Object
        (
            [country] =&gt; ee
            [created_at] =&gt; 2023-02-20T14:24:37+0000
            [email] =&gt; mk.test@maksekeskus.ee
            [id] =&gt; 4010e25d-99b4-40a6-8590-d87bf064e761
            [ip] =&gt; 90.190.81.184
            [ip_country] =&gt; ee
            [locale] =&gt; et
            [name] =&gt; 4010e25d-99b4-40a6-8590-d87bf064e761
            [object] =&gt; customer
        )

    [id] =&gt; 2e737dd6-cf53-42ef-9a53-67e9727bba4b
    [method] =&gt; 
    [object] =&gt; transaction
    [payment_methods] =&gt; stdClass Object
        (
            [banklinks] =&gt; Array
                (
                    [0] =&gt; stdClass Object
                        (
                            [channel] =&gt; Swedbank EE
                            [countries] =&gt; Array
                                (
                                    [0] =&gt; ee
                                )

                            [country] =&gt; ee
                            [display_name] =&gt; Swedbank
                            [logo_url] =&gt; https://static.test.maksekeskus.ee/img/channel/lnd/swedbank.png
                            [max_amount] =&gt; 100000
                            [name] =&gt; swedbank
                            [url] =&gt; https://payment.test.maksekeskus.ee/banklink.html?method=EE_SWED&amp;trx=2e737dd6-cf53-42ef-9a53-67e9727bba4b
                        )

                    [1] =&gt; stdClass Object
                        (
                            [channel] =&gt; SEB EE
                            [countries] =&gt; Array
                                (
                                    [0] =&gt; ee
                                )

                            [country] =&gt; ee
                            [display_name] =&gt; SEB
                            [logo_url] =&gt; https://static.test.maksekeskus.ee/img/channel/lnd/seb.png
                            [max_amount] =&gt; 100000
                            [name] =&gt; seb
                            [url] =&gt; https://payment.test.maksekeskus.ee/banklink.html?method=EE_SEB&amp;trx=2e737dd6-cf53-42ef-9a53-67e9727bba4b
                        )

                    [2] =&gt; stdClass Object
                        (
                            [channel] =&gt; LHV EE
                            [countries] =&gt; Array
                                (
                                    [0] =&gt; ee
                                )

                            [country] =&gt; ee
                            [display_name] =&gt; LHV
                            [logo_url] =&gt; https://static.test.maksekeskus.ee/img/channel/lnd/lhv.png
                            [max_amount] =&gt; 100000
                            [name] =&gt; lhv
                            [url] =&gt; https://payment.test.maksekeskus.ee/banklink.html?method=EE_LHV&amp;trx=2e737dd6-cf53-42ef-9a53-67e9727bba4b
                        )

                    [3] =&gt; stdClass Object
                        (
                            [channel] =&gt; Luminor EE
                            [countries] =&gt; Array
                                (
                                    [0] =&gt; ee
                                )

                            [country] =&gt; ee
                            [display_name] =&gt; Luminor
                            [logo_url] =&gt; https://static.test.maksekeskus.ee/img/channel/lnd/luminor.png
                            [max_amount] =&gt; 100000
                            [name] =&gt; nordea
                            [url] =&gt; https://payment.test.maksekeskus.ee/banklink.html?method=EE_NORDEA&amp;trx=2e737dd6-cf53-42ef-9a53-67e9727bba4b
                        )

                    [4] =&gt; stdClass Object
                        (
                            [channel] =&gt; Coop Pank EE
                            [countries] =&gt; Array
                                (
                                    [0] =&gt; ee
                                )

                            [country] =&gt; ee
                            [display_name] =&gt; Coop Pank
                            [logo_url] =&gt; https://static.test.maksekeskus.ee/img/channel/lnd/coop.png
                            [max_amount] =&gt; 100000
                            [name] =&gt; krediidipank
                            [url] =&gt; https://payment.test.maksekeskus.ee/banklink.html?method=EE_KREDIIDI&amp;trx=2e737dd6-cf53-42ef-9a53-67e9727bba4b
                        )

                    [5] =&gt; stdClass Object
                        (
                            [channel] =&gt; Pocopay EE
                            [countries] =&gt; Array
                                (
                                    [0] =&gt; fi
                                    [1] =&gt; ee
                                )

                            [country] =&gt; ee
                            [display_name] =&gt; Pocopay
                            [logo_url] =&gt; https://static.test.maksekeskus.ee/img/channel/lnd/pocopay.png
                            [max_amount] =&gt; 100000
                            [name] =&gt; pocopay
                            [url] =&gt; https://payment.test.maksekeskus.ee/banklink.html?method=EE_POCOPAY&amp;trx=2e737dd6-cf53-42ef-9a53-67e9727bba4b
                        )

                    [6] =&gt; stdClass Object
                        (
                            [channel] =&gt; Revolut PIS
                            [countries] =&gt; Array
                                (
                                    [0] =&gt; ee
                                )

                            [country] =&gt; ee
                            [display_name] =&gt; Revolut
                            [logo_url] =&gt; https://static.test.maksekeskus.ee/img/channel/lnd/revolut.png
                            [max_amount] =&gt; 15000
                            [name] =&gt; revolut
                            [url] =&gt; https://payment.test.maksekeskus.ee/open-banking.html?method=REVOLUT_PIS&amp;trx=2e737dd6-cf53-42ef-9a53-67e9727bba4b
                        )

                )

            [cards] =&gt; Array
                (
                    [0] =&gt; stdClass Object
                        (
                            [channel] =&gt; Visa
                            [display_name] =&gt; Visa
                            [logo_url] =&gt; https://static.test.maksekeskus.ee/img/channel/lnd/visa.png
                            [name] =&gt; visa
                            [url] =&gt; https://payment.test.maksekeskus.ee/card.html?trx=2e737dd6-cf53-42ef-9a53-67e9727bba4b
                        )

                    [1] =&gt; stdClass Object
                        (
                            [channel] =&gt; MasterCard
                            [display_name] =&gt; MasterCard
                            [logo_url] =&gt; https://static.test.maksekeskus.ee/img/channel/lnd/mastercard.png
                            [name] =&gt; mastercard
                            [url] =&gt; https://payment.test.maksekeskus.ee/card.html?trx=2e737dd6-cf53-42ef-9a53-67e9727bba4b
                        )

                )

            [other] =&gt; Array
                (
                    [0] =&gt; stdClass Object
                        (
                            [name] =&gt; redirect
                            [url] =&gt; https://payment.test.maksekeskus.ee/pay.html?trx=2e737dd6-cf53-42ef-9a53-67e9727bba4b
                        )

                    [1] =&gt; stdClass Object
                        (
                            [channel] =&gt; mTasku
                            [countries] =&gt; Array
                                (
                                    [0] =&gt; fi
                                    [1] =&gt; ee
                                )

                            [country] =&gt; ee
                            [display_name] =&gt; mTasku
                            [logo_url] =&gt; https://static.test.maksekeskus.ee/img/channel/lnd/mtasku.png
                            [max_amount] =&gt; 100000
                            [name] =&gt; mtasku
                            [url] =&gt; https://payment.test.maksekeskus.ee/mobile.html?method=MTASKU&amp;trx=2e737dd6-cf53-42ef-9a53-67e9727bba4b
                        )

                    [2] =&gt; stdClass Object
                        (
                            [channel] =&gt; Gift card EE
                            [countries] =&gt; Array
                                (
                                )

                            [country] =&gt; ee
                            [display_name] =&gt; Kniks
                            [logo_url] =&gt; https://static.test.maksekeskus.ee/img/channel/lnd/gift_card.png
                            [max_amount] =&gt; 100000
                            [name] =&gt; gift_card
                            [url] =&gt; https://payment.test.maksekeskus.ee/other.html?method=EE_GIFT_CARD&amp;trx=2e737dd6-cf53-42ef-9a53-67e9727bba4b
                        )

                    [3] =&gt; stdClass Object
                        (
                            [channel] =&gt; Gift card EE
                            [countries] =&gt; Array
                                (
                                )

                            [country] =&gt; fi
                            [display_name] =&gt; Kniks
                            [logo_url] =&gt; https://static.test.maksekeskus.ee/img/channel/lnd/gift_card.png
                            [max_amount] =&gt; 100000
                            [name] =&gt; gift_card
                            [url] =&gt; https://payment.test.maksekeskus.ee/other.html?method=EE_GIFT_CARD&amp;trx=2e737dd6-cf53-42ef-9a53-67e9727bba4b
                        )

                )

            [payLater] =&gt; Array
                (
                    [0] =&gt; stdClass Object
                        (
                            [channel] =&gt; Indivy 3 EE
                            [countries] =&gt; Array
                                (
                                    [0] =&gt; ee
                                )

                            [country] =&gt; ee
                            [display_name] =&gt; Indivy 3
                            [logo_url] =&gt; https://static.test.maksekeskus.ee/img/channel/lnd/slice.png
                            [max_amount] =&gt; 1500
                            [min_amount] =&gt; 75
                            [name] =&gt; slice
                            [url] =&gt; https://payment.test.maksekeskus.ee/pay-later.html?method=EE_SLICE&amp;trx=2e737dd6-cf53-42ef-9a53-67e9727bba4b
                        )

                    [1] =&gt; stdClass Object
                        (
                            [channel] =&gt; Indivy EE
                            [countries] =&gt; Array
                                (
                                    [0] =&gt; ee
                                )

                            [country] =&gt; ee
                            [display_name] =&gt; Indivy
                            [logo_url] =&gt; https://static.test.maksekeskus.ee/img/channel/lnd/indivy-go.png
                            [max_amount] =&gt; 800
                            [min_amount] =&gt; 30
                            [name] =&gt; indivy-go
                            [url] =&gt; https://payment.test.maksekeskus.ee/pay-later.html?method=EE_INDIVY_GO&amp;trx=2e737dd6-cf53-42ef-9a53-67e9727bba4b
                        )

                    [2] =&gt; stdClass Object
                        (
                            [channel] =&gt; Liisi ID EE
                            [countries] =&gt; Array
                                (
                                    [0] =&gt; ee
                                )

                            [country] =&gt; ee
                            [display_name] =&gt; Liisi ID
                            [logo_url] =&gt; https://static.test.maksekeskus.ee/img/channel/lnd/liisi_ee.png
                            [max_amount] =&gt; 100000
                            [min_amount] =&gt; 30
                            [name] =&gt; liisi_ee
                            [url] =&gt; https://payment.test.maksekeskus.ee/pay-later.html?method=EE_LIISI_EE&amp;trx=2e737dd6-cf53-42ef-9a53-67e9727bba4b
                        )

                )

        )

    [recurring_required] =&gt; 
    [reference] =&gt; 123abc
    [status] =&gt; CREATED
    [type] =&gt; 
)
</small></pre>
                </div>
            </td>
        </tr>
    </tbody>
</table></div>
        <br>
      </div>
    </div>
</div>
<p>&nbsp;&nbsp;&nbsp; So we have now a Transaction, ID: <code>2e737dd6-cf53-42ef-9a53-67e9727bba4b</code></p>
<br>

<div class="panel panel-default">
    <div class="panel-heading" data-toggle="collapse" data-target="#collapseTestcards">
      <h4 class="panel-title">
        <a class="accordion-toggle">
          x. Select a Test card for use in the dialog (copy to clipboard)
        </a>
      </h4> 
    </div> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4012001037141112 &nbsp;&nbsp; | expiration date: any in future |  CVC: anything is valid | (expand for more cards..)
    <div id="collapseTestcards" class="panel-collapse collapse" aria-expanded="false">
      <div class="panel-body">
                        <p><b>Quick selection</b></p>
            <ul>
                                    <li>4012001037141112 - Visa/Mastercard - 3D Secure enabled</li>
                                    <li>5168830759303438 - MC valid until=10/24 CVC=418</li>
                                    <li>5168830721419445 - MC valid until=10/24 CVC=528</li>
                                    <li>4051700003921116 - MC valid until=12/22 CVC=137</li>
                            </ul>
                        <p>0-amount Authorization, "Save Card functionality"</p>
            <ul>
                                    <li>5168830763287080 - MC valid until=10/21 CVC=949</li>
                                    <li>4761739001010010 - Visa valid until=09/25 CVC=179</li>
                                    <li>5204740000001002 - MC valid until=12/25 CVC=100</li>
                                    <li>5168830759303438 - MC valid until=10/24 CVC=418</li>
                                    <li>5168830721419445 - MC valid until=10/24 CVC=528</li>
                                    <li>4051700003921116 - MC valid until=12/22 CVC=137</li>
                            </ul>
                        <p>Visa</p>
            <ul>
                                    <li>4012001037490014 - Valid 3-D Secure Message With Embedded Whitespace Characters (OK)</li>
                                    <li>4012001037141112 - Successful Authentication via 16-digit PAN (OK)</li>
                                    <li>4005559876540 - Successful Authentication via 13-digit PAN (API error 1036: 100:do not honour)</li>
                                    <li>4012001037167778 - Successful Merchant Attempt via 16-digit PAN (OK)</li>
                                    <li>4012001036275556 - No Response From Visa Directory Server (API error 1036: Authorization failed)</li>
                                    <li>4012001038443335 - Cardholder Not Participating (OK - fallback to regular payment)</li>
                                    <li>4012001038488884 - Unable to Verify Enrollment (OK - fallback to regular payment)</li>
                                    <li>4012001036298889 - Invalid Response from Directory Server (API error 1036: Authorization failed)</li>
                                    <li>4012001036853337 - Invalid ACS Digital Signature (API error 1036: 946:3d secure field extraction from PaRes failed)</li>
                                    <li>4012001036983332 - Expired ACS Signing Certificate (API error 1036: 946:3d secure field extraction from PaRes failed)</li>
                                    <li>4012001037461114 - Authentication Failure (API error 1036: 182:3d secure authentication failed)</li>
                                    <li>4012001037484447 - Authentication Not Available (API error 1036: 946:3d secure field extraction from PaRes failed)</li>
                                    <li>4012001037490006 - Invalid Payer Authentication Response (API error 1036: 946:3d secure field extraction from PaRes failed)</li>
                            </ul>
                    <br>
      </div>
    </div>
</div>


<div class="panel panel-default">
    <div class="panel-heading" data-toggle="collapse" data-target="#collapsePrepare">
      <h4 class="panel-title">
        <a class="accordion-toggle">
          2..3 prepare parameters and trigger checkout.js
        </a>
      </h4> 
    </div>
    <div id="collapsePrepare" class="panel-collapse collapse in" aria-expanded="true" style>
        <div class="panel-body">
            There are 2 approaches how to invoke the checkout.js and receive back data from the dialog: <br>
            <ul>
                <li>place an hidden form on page that checkout.js will use to post the data to your backend, OR</li>
                <li>invoke checkout.js with a callback function </li>
            </ul>
            <br>    

            <div class="panel panel-default">
                <div class="panel-heading" data-toggle="collapse" data-target="#collapseFormSubmit">
                  <h4 class="panel-title">
                    <a class="accordion-toggle">
                      2.1 - Form Submit approach
                    </a>   
                  </h4> 
                </div>
                <div id="collapseFormSubmit" class="panel-collapse collapse in" aria-expanded="true">
                  <div class="panel-body">
                    checkout.js binds itself to the form within which it was included<br>
                    We have placed such form to this page:<br>

                    <form id="checkoutForm" action="return.php" method="POST">
                        <input type="hidden" name="transaction" id="transaction" value="2e737dd6-cf53-42ef-9a53-67e9727bba4b" />
                        
                        <div class="row">
                            <div class="col-md-8">

            <pre> &lt;form id="checkoutForm" action="return.php" method="POST"&gt;
    &lt;input type="hidden" name="transaction" id="transaction" value="&lt;?php echo $transaction-&gt;id; ?&gt;" /&gt;

    &lt;script src="https://payment.test.maksekeskus.ee/checkout/dist/checkout.min.js"
        data-key="g45CesJxnaZjBeRl38jY0qXihql3ETBLNxdSPNf2N5cfaUq4TzSJQFSYW3RrMj2q"
        data-transaction="2e737dd6-cf53-42ef-9a53-67e9727bba4b"
        data-amount="75.95"
        data-email="mk.test@maksekeskus.ee"
        data-client-name="Mike Test"
        data-locale="et"
        data-name="Merchant Name"
        data-description="Order no. 123abc"
        data-selector="#checkoutBtn"
        data-backdrop-close="false"&gt;
    &lt;/script&gt;

&lt;/form&gt;
</pre>
                                <input class="btn btn-primary" type="submit" value="Open credit card dialog" id="checkoutBtn" />
                            </div>

                        </div>
                        
                        <script src="https://payment.test.maksekeskus.ee/checkout/dist/checkout.js"
                            data-key="g45CesJxnaZjBeRl38jY0qXihql3ETBLNxdSPNf2N5cfaUq4TzSJQFSYW3RrMj2q"
                            data-transaction="2e737dd6-cf53-42ef-9a53-67e9727bba4b"
                            data-amount="75.95"
                            data-email="mk.test@maksekeskus.ee"
                            data-client-name="Mike Test"
                            data-locale="et"
                            data-name="Merchant Name"
                            data-description="Order no. 123abc"
                            data-selector="#checkoutBtn"
                            data-backdrop-close="false">
                        </script>
                        
                    </form>   



                    <br>
                  </div>
                </div>
            </div>     

            <div class="panel panel-default">
                <div class="panel-heading" data-toggle="collapse" data-target="#collapseJsCallback">
                  <h4 class="panel-title">
                    <a class="accordion-toggle">
                      2.2 - js callback function approach
                    </a>   
                  </h4> 
                </div>
                <div id="collapseJsCallback" class="panel-collapse collapse in" aria-expanded="true">
                  <div class="panel-body">

                       We use here js callback function to receive the data back from the credit card dialog<br>
                        We have placed such js script to the page:<br><br>
                          
                            <div class="row">               
                                <div class="col-md-10">
<pre>
&lt;script src=&quot;&lt;?php echo $context-&gt;gateway-&gt;url; ?&gt;/checkout/dist/checkout.min.js&quot;&gt;&lt;/script&gt;
    
&lt;script&gt;
    window.cc_callback = function(data)
    {   
        alert( 'The CC dialog returned: \r\n \r\n'+ JSON.stringify(data) ); 
    }

    window.Maksekeskus.Checkout.initialize(
    {   'key' : '&lt;?php echo $context-&gt;shop-&gt;publishableKey; ?&gt;', 
        'transaction' : '&lt;?php echo $transaction-&gt;id; ?&gt;',
        'amount' : '&lt;?php echo $transaction-&gt;amount; ?&gt;', 
        'currency' : '&lt;?php echo $transaction-&gt;currency; ?&gt;', 
        'email' : 'john@diehard.ly', 
        'clientName' : 'John McLane', 
        'locale' : 'en', 
        'name' : 'MyService.com', 
        'description' : 'Order no. 123abc', 
        'completed' : 'cc_callback', 
        'cancelled' : 'cc_callback' }
    );
&lt;/script&gt;

&lt;button type=&quot;button&quot; class=&quot;btn btn-primary&quot; aria-label=&quot;Open CC Payment dialog&quot; onclick=&quot;window.Maksekeskus.Checkout.open();&quot;&gt;Open CC Payment dialog&lt;/button&gt; 

</pre>                                    


                                </div>                               

                                <script src="https://payment.test.maksekeskus.ee/checkout/dist/checkout.js"></script>
                                <script>
                                    window.cc_callback = function(data)
                                    {   

                                        alert( 'The CC dialog returned: \r\n \r\n'+ JSON.stringify(data) ); 
                                        document.getElementById("cc_dialog_return_data").innerHTML = JSON.stringify(data);
                                        var strPaymentToken;
                                        strPaymentToken = data.paymentToken;
                                        document.getElementById("btnPay").href += strPaymentToken; 
                                        document.getElementById("paymentToken").innerHTML = strPaymentToken;
                                    }

                                    window.Maksekeskus.Checkout.initialize(
                                    {   'key' : 'g45CesJxnaZjBeRl38jY0qXihql3ETBLNxdSPNf2N5cfaUq4TzSJQFSYW3RrMj2q', 
                                        'transaction' : '2e737dd6-cf53-42ef-9a53-67e9727bba4b',
                                        'amount' : '75.95', 
                                        'currency' : 'EUR', 
                                        'email' : 'john@diehard.ly', 
                                        'clientName' : 'John McLane', 
                                        'locale' : 'en', 
                                        'name' : 'MyService.com', 
                                        'description' : 'Order no. 123abc', 
                                        //'recurringRequired' : 'true',
                                        //'recurringTitle' : 'MyService.com subscription',
                                        //'recurringDescription' : 'membership fee is 10€ monthly',
                                        //'recurringConfirmation' : 'i agree that my credit card will be charged the fee each month automatically',
                                        'backdropClose' : 'false', 
                                        'completed' : 'cc_callback', 
                                        'cancelled' : 'cc_callback' }
                                    );
                                 
                                </script>

                            </div>
                        <br>
                        <button type="button" class="btn btn-primary" aria-label="Open CC payment dialog" onclick="window.Maksekeskus.Checkout.open();">Open CC Payment dialog</button> 

                        <br><br>

                  </div>
                </div>
            </div>                   


            <br><br>
            <div class="panel panel-default" >
                <div class="panel-heading" data-toggle="collapse" data-target="#collapseSnippetOptions">
                    <a class="accordion-toggle" id="snippetOptions">
                      See all checkout.js options
                    </a>  
                </div>
                <div id="collapseSnippetOptions" class="panel-collapse collapse" aria-expanded="false">
                  <div class="panel-body">
                                             <table class="table table-striped">
                            <thead>
                            <tr>
                                <th width="20%">HTML property name</th>
                                <th width="20%">JS option name</th>
                                <th>Required</th>
                                <th>Description</th>
                            </tr></thead><tbody>
                            <tr>
                                <td><code>data-key</code></td>
                                <td><code>key</code></td>
                                <td>Yes</td>
                                <td>Shop's Public API Key (available in your <a href="https://merchant.test.maksekeskus.ee">Merchant Portal</a>)</td>
                            </tr>
                            <tr>
                                <td><code>data-transaction</code></td>
                                <td><code>transaction</code></td>
                                <td>Yes</td>
                                <td>Transaction ID (created via <a href="http://www.maksekeskus.ee/api">Billing API</a>)</td>
                            </tr>
                            <tr>
                                <td><code>data-amount</code></td>
                                <td><code>amount</code></td>
                                <td>Yes</td>
                                <td>Transaction amount (numeric, up to 2 decimals: xxx.xx)</td>
                            </tr>
                            <tr>
                                <td><code>data-currency</code></td>
                                <td><code>currency</code></td>
                                <td></td>
                                <td>Transaction currency (<a href="http://en.wikipedia.org/wiki/ISO_4217" target="_blank">ISO 4217</a>). Defaults to <em>EUR</em></td>
                            </tr>
                            <tr>
                                <td><code>data-email</code></td>
                                <td><code>email</code></td>
                                <td></td>
                                <td>Pre-filled customer email.</td>
                            </tr>
                            <tr>
                                <td><code>data-client-name</code></td>
                                <td><code>clientName</code></td>
                                <td></td>
                                <td>Pre-filled customer name.</td>
                            </tr>
                            <tr>
                                <td><code>data-locale</code></td>
                                <td><code>locale</code></td>
                                <td></td>
                                <td>
                                    Customer's language (<a href="http://en.wikipedia.org/wiki/ISO_639-1" target="_blank">ISO 639-1</a>). Defaults to <em>en</em>. Languages available:
                                    <ul>
                                        <li>en - English</li>
                                        <li>et - Estonian</li>
                                        <li>fr - French</li>
                                        <li>lv - Latvian</li>
                                        <li>lt - Lithuanian</li>
                                        <li>ru - Russian</li>
                                        <li>es - Spanish</li>
                                        <li>sv - Swedish</li>
                                        <li>no - Norwegian</li>
                                    </ul>
                                </td>
                            </tr>
                            <tr>
                                <td><code>data-name</code></td>
                                <td><code>name</code></td>
                                <td></td>
                                <td>Shop's name to be shown in the form header.</td>
                            </tr>
                            <tr>
                                <td><code>data-description</code></td>
                                <td><code>description</code></td>
                                <td></td>
                                <td>Short description of the payment for the customer. Will be shown in the form header.</td>
                            </tr>
                            
                            <!-- Recurring subscription attributes -->

                            <tr>
                                <td><code>data-recurring-title</code></td>
                                <td><code>recurringTitle</code></td>
                                <td></td>
                                <td>Title of the subscription/recurring payment the customer is subscribing for. The definition of this option triggers the Checkout form to display recurring payment details.</td>
                            </tr>                          
                            <tr>
                                <td><code>data-recurring-description</code></td>
                                <td><code>recurringDescription</code></td>
                                <td></td>
                                <td>Description of the subscription/recurring payment the customer is subscribing for. Include here information about recurring payment amount, interval, etc.</td>
                            </tr>
                            <tr>
                                <td><code>data-recurring-confirmation</code></td>
                                <td><code>recurringConfirmation</code></td>
                                <td></td>
                                <td>Confirmation text shown next to the approval checkbox for the customer to accept recurring billing.</td>
                            </tr>
                            <tr>
                                <td><code>data-recurring-checked</code></td>
                                <td><code>recurringChecked</code></td>
                                <td></td>
                                <td>Whether or not the approval checkbox to accept recurring billing is checked by default. Defaults to <em>false</em>.<br>
                                NB! It probably legally more correct that the user does the agreement check by himself. </td>
                            </tr>
                            <tr>
                                <td><code>data-recurring-required</code></td>
                                <td><code>recurringRequired</code></td>
                                <td></td>
                                <td>Signals that the dialog will not allow make the payent unless user has marked in the 'recurring-confirmation' checkbox.</td>
                            </tr>                              
                            <tr>
                                <td><code>data-selector</code></td>
                                <td><code>selector</code></td>
                                <td></td>
                                <td>Hooks quick implementation to the given selector. Note: it is document.querySelector not jQuery so no fancy selectors.</td>
                            </tr>
                            <tr>
                                <td><code>data-completed</code></td>
                                <td><code>completed</code></td>
                                <td></td>
                                <td>Name of the JavaScript function to be invoked on success. Will be called with the data argument.</td>
                            </tr>
                            <tr>
                                <td><code>data-cancelled</code></td>
                                <td><code>cancelled</code></td>
                                <td></td>
                                <td>Name of the JavaScript function to be invoked on user cancel action (modal close). No arguments passed.</td>
                            </tr>
                            <tr>
                                <td></td>
                                <td><code>noConflict</code></td>
                                <td></td>
                                <td>Tells Checkout to run in noConflic mode. This will return a new instance of Checkout, allowing you to run multiple instances on the same page. Defaults to <em>true</em> in quick mode, <em>false</em> in custom mode.</td>
                            </tr>
                            <tr>
                                <td></td>
                                <td><code>persistentModal</code></td>
                                <td></td>
                                <td>Boolean. When set to <em>true</em>, iframe will not be destroyed on close.</td>
                            </tr>
                            <tr>
                                <td></td>
                                <td><code>openOnLoad</code></td>
                                <td></td>
                                <td>Open modal right away (on script load).</td>
                            </tr></tbody>
                            <tr>
                                <td><code>data-ocp-enabled</code></td>
                                <td><code>ocpEnabled</code></td>
                                <td></td>
                                <td>add data-ocp-enabled="true" if you want the 'remember me' section to be displayed on the credit card form. Note that OCP feature must also be activated for the Shop by MK administrator</td>
                            </tr>
                            <tr>
                                <td><code>data-backdrop-close</code></td>
                                <td><code>backdropClose</code></td>
                                <td></td>
                                <td>add data-backdrop-close="false" if you want the CC dialog be truly modal. Defaults to true.</td>
                            </tr>
                            <tr>
                                <td><code>data-ocp-checked</code></td>
                                <td><code>ocpChecked</code></td>
                                <td></td>
                                <td>Whether OCP checkbox is marked by default. Defaults to true.</td>
                            </tr>
                            </tbody>
                        </table>                 
           
                  </div>
                </div>
            </div>

        </div>  <!-- collapsePrepare panel body ends -->
    </div>
</div>



<div class="panel panel-default">
    <div class="panel-heading" data-toggle="collapse" data-target="#collapseExamineResults">
      <h4 class="panel-title">
        <a class="accordion-toggle">
          6..7. Examine returned data
        </a>   
      </h4> 
    </div>
    <div id="collapseExamineResults" class="panel-collapse collapse in" aria-expanded="true">
      <div class="panel-body">
         Note that 3D Secure card payment dialog does not end here, instead it will arrive to your <code>return_url</code> <br>
         If you use Form Submit based approach, then you examine the data in submit request handler.
        <br><br>
        Data returned to js callback(will appear here if you complete the tutorial):<br>
        <div id="cc_dialog_return_data"></div>
      </div>
    </div>
</div>

<br>
        
        <hr />

                                                                            <h4>Transaction-related</h4>
                                                    <a class="btn btn-info" href="transaction.get.php?transaction=2e737dd6-cf53-42ef-9a53-67e9727bba4b">Get transaction details</a>
                                    <a class="btn btn-info" href="methods.php?transaction=2e737dd6-cf53-42ef-9a53-67e9727bba4b">Get payment methods</a>
                                    <a class="btn btn-info" href="token.php?transaction=2e737dd6-cf53-42ef-9a53-67e9727bba4b">Create payment token</a>
                                    <a class="btn btn-info" href="payment.php?transaction=2e737dd6-cf53-42ef-9a53-67e9727bba4b">Create payment</a>
                                    <a class="btn btn-info" href="refund.php?transaction=2e737dd6-cf53-42ef-9a53-67e9727bba4b">Refund transaction</a>
                                    <a class="btn btn-info" href="recurring.php?transaction=2e737dd6-cf53-42ef-9a53-67e9727bba4b">Recurring</a>
                                                        

    
</div>  <!-- end of fluid container? -->


<style>
#myImg {
  border-radius: 5px;
  cursor: pointer;
  transition: 0.3s;
}

#myImg:hover {opacity: 0.7;}

/* The Modal (background) */
.modal {
  display: none; /* Hidden by default */
  position: fixed; /* Stay in place */
  z-index: 1; /* Sit on top */
  padding-top: 100px; /* Location of the box */
  left: 0;
  top: 0;
  width: 100%; /* Full width */
  height: 100%; /* Full height */
  overflow: auto; /* Enable scroll if needed */
  background-color: rgb(0,0,0); /* Fallback color */
  background-color: rgba(0,0,0,0.9); /* Black w/ opacity */
}

/* Modal Content (image) */
.modal-content {
  margin: auto;
  display: block;
  width: 80%;
  max-width: 700px;
}

/* Caption of Modal Image */
#caption {
  margin: auto;
  display: block;
  width: 80%;
  max-width: 700px;
  text-align: center;
  color: #ccc;
  padding: 10px 0;
  height: 150px;
}

/* Add Animation */
.modal-content, #caption {  
  -webkit-animation-name: zoom;
  -webkit-animation-duration: 0.6s;
  animation-name: zoom;
  animation-duration: 0.6s;
}

@-webkit-keyframes zoom {
  from {-webkit-transform:scale(0)} 
  to {-webkit-transform:scale(1)}
}

@keyframes zoom {
  from {transform:scale(0)} 
  to {transform:scale(1)}
}

/* The Close Button */
.close {
  position: absolute;
  top: 15px;
  right: 35px;
  color: #f1f1f1;
  font-size: 40px;
  font-weight: bold;
  transition: 0.3s;
}

.close:hover,
.close:focus {
  color: #bbb;
  text-decoration: none;
  cursor: pointer;
}

/* 100% Image Width on Smaller Screens */
@media only screen and (max-width: 700px){
  .modal-content {
    width: 100%;
  }
}
</style>

<script>
function openModal(image)
{
  var modal = document.getElementById("myModal");
  var modalImg = document.getElementById("img01");
  modal.style.display = "block";
  modalImg.style.backgroundColor = "white";
  modalImg.src = image.src;
}

function closeImage()
{
  var modal = document.getElementById("myModal");
  modal.style.display = "none";
}
</script>

<div id="myModal" class="modal">
  <span onclick="closeImage();" class="close">&times;</span>
  <img class="modal-content" id="img01">
</div>


 
  
    <script>

     function toggleNote (input) {
            var noteId;
            NoteId= 'note-'+input;

            if (document.getElementById(NoteId) != undefined) {
                if (document.getElementById(NoteId).style.display == "none") {
                 document.getElementById(NoteId).style.display = "block";
                } else {
                 document.getElementById(NoteId).style.display = "none";
                }
            };
        };
    </script>



    
  </body>
</html>
